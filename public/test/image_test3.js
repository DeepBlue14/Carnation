// Generated by CoffeeScript 1.9.3
(function() {
  var Image, PNG, color, fs, idx, img, png, x, y;

  Image = require('./../src/sensor_msgs/Image.coffee');

  fs = require('fs');

  PNG = require('pngjs').PNG;

  img = new Image.Image('../res/image/james.png');

  png = new PNG({
    width: img.width,
    height: img.height,
    filterType: -1
  });

  console.log(img.width + ", " + img.height);

  console.log(png.width + ", " + png.height);

  y = 0;

  while (y < png.height) {
    x = 0;
    while (x < png.width) {
      idx = (png.width * y + x) << 2;
      color = img.getAt(x, y);
      png.data[idx] = img.getAt(x, y).r;
      png.data[idx + 1] = img.getAt(x, y).g;
      png.data[idx + 2] = img.getAt(x, y).b;
      png.data[idx + 3] = img.getAt(x, y).a;
      x++;
    }
    y++;
  }

  png.pack().pipe(fs.createWriteStream('newOut.png'));

  img.saveAsync('async_save.png');

}).call(this);

//# sourceMappingURL=image_test3.js.map
